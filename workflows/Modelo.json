{
  "active": false,
  "activeVersion": null,
  "activeVersionId": null,
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Dania Assistant",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Dania Assistant",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "MongoDB Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Dania Assistant",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Qualifier",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Qualifier": {
      "ai_tool": [
        [
          {
            "node": "Dania Assistant",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "questionsflow": {
      "ai_tool": [
        [
          {
            "node": "Qualifier",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "questionstrigger": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Get row(s)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Find documents": {
      "main": [
        [
          {
            "node": "Update documents",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think": {
      "ai_tool": [
        [
          {
            "node": "Dania Assistant",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Update documents": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s)": {
      "main": [
        [
          {
            "node": "Find documents",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-11-26T07:59:18.201Z",
  "id": "2U3TzXH6MUtpM2u5",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Modelo",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "=message: {{ $json.message }}",
        "options": {
          "systemMessage": "=Deifinir"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        -976,
        -304
      ],
      "id": "1ee7a96f-7774-4fc8-994a-bac78e1ba771",
      "name": "Dania Assistant"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        -1552,
        -304
      ],
      "id": "472528e9-41ec-4075-8484-cd8a677ed020",
      "name": "When chat message received",
      "webhookId": "99f7e024-0a16-4873-b8ec-8deb1da4a99b",
      "disabled": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c7e7e1f3-0bf4-4c3c-be6a-b86462bf4e19",
              "name": "sessionId",
              "value": "={{ $json.sessionId }}",
              "type": "string"
            },
            {
              "id": "0d233683-b586-4405-864d-066c74c2bbc0",
              "name": "message",
              "value": "={{ $json.chatInput }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1312,
        -304
      ],
      "id": "c6fa6c92-7537-44d1-a2c1-e0113a600656",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -1568,
        96
      ],
      "id": "5dad9ef4-376f-40e0-812a-3aac2e16f3d2",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "si6kdb1qPc1J6iuX",
          "name": "OpenAi Supabase Hybrid"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryMongoDbChat",
      "typeVersion": 1,
      "position": [
        -1408,
        96
      ],
      "id": "a0adc831-002c-44c7-9a6d-d4f8e8513a5e",
      "name": "MongoDB Chat Memory",
      "credentials": {
        "mongoDb": {
          "id": "KNCVFnX6uXTL664z",
          "name": "MongoDB n8n"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -816,
        144
      ],
      "id": "e8cc0954-235f-4bde-beaf-2f4f67884d34",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "si6kdb1qPc1J6iuX",
          "name": "OpenAi Supabase Hybrid"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "AI Agent that can call Qualifier",
        "text": "={{ $('Edit Fields').item.json.message }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        -720,
        -64
      ],
      "id": "17894427-8968-4b26-a2d5-e667cb81a9d9",
      "name": "Qualifier"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "2U3TzXH6MUtpM2u5",
          "mode": "id",
          "cachedResultUrl": "/workflow/2U3TzXH6MUtpM2u5"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -528,
        160
      ],
      "id": "292589d2-70ff-4e7c-bddf-e8783fb06731",
      "name": "questionsflow"
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "query"
            },
            {
              "name": "sessionId"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        96,
        -112
      ],
      "id": "f6b8ea31-4635-4f99-98e3-e8282caee250",
      "name": "questionstrigger"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a525d0fb-2ba6-4c3e-ace7-c755fd2f9edf",
              "name": "query",
              "value": "",
              "type": "string"
            },
            {
              "id": "bc80e527-a365-4589-8a72-93ee98cc498c",
              "name": "sessionId",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        304,
        -112
      ],
      "id": "3d3290b8-ce5f-4ac0-9cc0-07374a634b44",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "collection": "n8n_chat_history",
        "options": {}
      },
      "type": "n8n-nodes-base.mongoDb",
      "typeVersion": 1.2,
      "position": [
        656,
        -112
      ],
      "id": "81d6383e-9194-43ac-9be3-10606ea0c463",
      "name": "Find documents",
      "credentials": {
        "mongoDb": {
          "id": "KNCVFnX6uXTL664z",
          "name": "MongoDB n8n"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "collection": "leads",
        "options": {}
      },
      "type": "n8n-nodes-base.mongoDb",
      "typeVersion": 1.2,
      "position": [
        864,
        -112
      ],
      "id": "be8e4bf3-94f1-46ad-8082-8456bcc2abbc",
      "name": "Update documents",
      "credentials": {
        "mongoDb": {
          "id": "KNCVFnX6uXTL664z",
          "name": "MongoDB n8n"
        }
      }
    },
    {
      "parameters": {
        "content": "## Qualification Flow",
        "height": 384,
        "width": 1248
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        16,
        -256
      ],
      "id": "09229e16-730d-4d61-b054-ccf644a834f9",
      "name": "Sticky Note"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [
        -1264,
        96
      ],
      "id": "38291e1f-8cae-4b0f-bf0d-f3c65ab15954",
      "name": "Think"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1072,
        -112
      ],
      "id": "1bc210a5-0377-4689-a6b9-6c09177b9e4a",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "ztvO0dRu8vOWH9Bq",
          "mode": "list",
          "cachedResultName": "questions",
          "cachedResultUrl": "/projects/zIvgruNDMJwjqAqX/datatables/ztvO0dRu8vOWH9Bq"
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        464,
        -112
      ],
      "id": "ff814f90-5c65-4c9a-9d40-ecf8044df7d7",
      "name": "Get row(s)"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "updatedAt": "2025-11-26T07:59:18.204Z",
      "createdAt": "2025-11-26T07:59:18.204Z",
      "role": "workflow:owner",
      "workflowId": "2U3TzXH6MUtpM2u5",
      "projectId": "zIvgruNDMJwjqAqX"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-11-26T08:17:35.000Z",
  "versionId": "df7f8c4c-a9f2-41d0-aeb2-5a9c0ab675ea"
}